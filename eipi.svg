<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="640" height="640" xmlns="http://www.w3.org/2000/svg" viewBox="-10 -10 20 20">

<g id="container" transform="scale(1)" stroke-width="0.05" fill="white" fill-opacity="0.0">
  <path d="M -10 0 l 20 0" stroke="blue" stroke-opacity="0.2"/>
  <path d="M 0 -10 l 0 20" stroke="blue" stroke-opacity="0.2"/>
  <path id="path" d="M 1 0 h 1" stroke="black" />
</g>

  <script type="text/javascript"><![CDATA[
    var startZoom = 1;
    var initialPause = 2000;
    var timeIncrement = 10;

    var zoom = startZoom;
    var container = document.getElementById("container");
    var count = 0;

    function getPath(steps) {
      var d = "M 1 0 h 1 ";
      var horiz = true;
      var dist = 1;
      for (var i = 1; i < steps; i++) {
        horiz = !horiz;
        dist = dist * Math.PI / i;
        if (i % 2 == 1) {
          dist = -dist;
        }
        d += (horiz ? "h" : "v") + " " + dist + " ";
      }
      console.log(d);
      return d;
    }

    var path = document.getElementById("path");
    path.setAttribute('d', getPath(20));

    function repeat() {
      timeout = timeIncrement;
      zoom *= 1.01;
      if (zoom > 500000) {
        zoom = startZoom;
        timeout = initialPause;
      }
      if (count++ % 100 == 0) {
        console.log(zoom);
      }
      container.setAttribute('transform','scale(' + zoom + ')');
      container.setAttribute('stroke-width', 0.05 * startZoom /zoom); // constant width
      setTimeout(repeat, timeout);
    }
    setTimeout(repeat, initialPause);
    ]]></script>

</svg>
